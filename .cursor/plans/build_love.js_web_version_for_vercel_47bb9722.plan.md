---
name: Build love.js Web Version for Vercel
overview: Set up love.js to compile the LOVE2D game into a web-compatible format and configure Vercel for deployment. This will create a web build that runs in browsers without requiring LOVE2D installation.
todos:
  - id: setup-package-json
    content: Create package.json with build scripts and dependencies
    status: completed
  - id: create-build-script
    content: Create build-web.js script to compile .love file using love.js
    status: completed
  - id: configure-vercel
    content: Create vercel.json with proper configuration for WASM files and routing
    status: completed
  - id: optimize-web-build
    content: Add loading screen and optimize web/index.html for better UX
    status: completed
  - id: update-readme
    content: Update README.md with web deployment instructions and Vercel link
    status: completed
  - id: test-build
    content: Test the web build locally before deploying
    status: completed
---

# Build love.js Web Version for Vercel Deployment

## Overview

Convert the Montessori Color Theory LOVE2D game into a web application using love.js (Emscripten-based LOVE2D-to-web compiler) and configure it for Vercel deployment.

## Architecture

```
.love file → love.js compiler → Web files (HTML/JS/WASM) → Vercel → Browser
```

## Implementation Steps

### 1. Set Up love.js Build Environment

**Files to create:**

- `package.json` - Node.js dependencies and build scripts
- `.gitignore` - Exclude build artifacts and node_modules
- `build-web.sh` or `build-web.js` - Build script for love.js compilation

**Dependencies needed:**

- love.js (via npm or direct download)
- Node.js build tools
- Emscripten SDK (if building from source, or use pre-built love.js)

**Approach:**

- Use pre-built love.js from GitHub releases (easier than building from source)
- Create a build script that:

  1. Downloads love.js if not present
  2. Compiles the `.love` file into web format
  3. Outputs HTML, JS, and WASM files to a `web/` directory

### 2. Create Build Script

**File: `build-web.js` or `build-web.sh`**

- Check for love.js installation
- Run love.js compiler on `dist/MontessoriColorTheory.love`
- Output to `web/` directory
- Handle file paths and dependencies

**Key love.js command:**

```bash
love.js dist/MontessoriColorTheory.love web/ --title "Montessori Color Theory"
```

### 3. Configure Vercel

**Files to create:**

- `vercel.json` - Vercel configuration
- `web/index.html` - Entry point (generated by love.js, may need customization)

**Vercel configuration:**

- Set build command to run love.js compilation
- Set output directory to `web/`
- Configure headers for WASM files (MIME types)
- Set up proper routing for SPA

**Key settings:**

- Build command: `npm run build` or `node build-web.js`
- Output directory: `web`
- Headers for `.wasm` files: `application/wasm`
- Headers for `.data` files: `application/octet-stream`

### 4. Optimize Web Build

**Considerations:**

- File size optimization (love.js can produce large files)
- Loading screen/indicator
- Mobile touch support (already handled by LOVE2D)
- Performance optimization for paint mode pixel processing

**Files to modify/create:**

- `web/index.html` - Add loading indicator, meta tags
- Custom CSS for loading screen
- Potentially modify `conf.lua` for web-specific settings

### 5. Update Documentation

**File: `README.md`**

- Add web deployment section
- Include link to Vercel deployment
- Add build instructions for web version

## File Structure After Build

```
Montessori_Color_Theory/
├── main.lua (original - preserved)
├── conf.lua (original - preserved)
├── color_names.lua (original - preserved)
├── package.json (new - for web build)
├── build-web.js (new - build script)
├── vercel.json (new - Vercel config)
├── web-build/ (new - separate web build directory)
│   ├── index.html
│   ├── game.js
│   ├── game.wasm
│   ├── game.data
│   └── love.js
└── dist/ (original - preserved)
    └── MontessoriColorTheory.love
```

**Important:** All original files remain untouched. Web build is completely separate in `web-build/` directory.

## Technical Details

### love.js Requirements

- LOVE2D 11.5 compatibility (matches current `conf.lua` version)
- Emscripten-compiled LOVE2D runtime
- Canvas-based rendering (works in browsers)

### Vercel Configuration

- Static file hosting
- Proper MIME types for WASM and data files
- Single Page Application routing
- Build optimization

### Potential Issues to Address

1. **Performance**: Paint mode uses intensive pixel-by-pixel processing - may need optimization for web
2. **File Size**: love.js builds can be large (several MB) - consider compression
3. **Loading Time**: Large WASM files take time to load - add loading indicator
4. **Browser Compatibility**: Ensure modern browser support (WASM required)

## Build Process

1. Install dependencies: `npm install`
2. Build web version: `npm run build`
3. Test locally: Serve `web/` directory
4. Deploy to Vercel: `vercel --prod` or connect GitHub repo

## Dependencies

- Node.js (for build scripts)
- love.js (Emscripten LOVE2D runtime)
- Vercel CLI (optional, for deployment)

## Notes

- love.js may need specific version matching LOVE2D 11.5
- WASM files require proper MIME type headers
- Consider CDN for faster loading
- May need to adjust `conf.lua` for web-specific window settings